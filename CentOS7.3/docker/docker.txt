1、设置/etc/selinux/config
SELINUX=disabled
2、关闭防火墙
systemctl disable firewalld
systemctl stop firewalld

3、
yum -y install etcd kubernetes

systemctl start etcd
systemctl start docker
systemctl start kube-apiserver
systemctl start kube-controller-manager
systemctl start kube-scheduler
systemctl start kubelet
systemctl start kube-proxy

4、修改配置文件etc/docker/daemon.json
{
"registry-mirrors": ["http://hub-mirror.c.163.com"]
}
重启docker

5、下载mysql

docker pull mysql:5.6

6、查看

docker images |grep mysql



docker run -p 3306:3306 --name mymysql -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/logs -v $PWD/data:/mysql_data -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.6

-p 3306:3306：将容器的3306端口映射到主机的3306端口

-v $PWD/conf:/etc/mysql/conf.d：将主机当前目录下的conf/my.cnf挂载到容器的/etc/mysql/my.cnf

-v $PWD/logs:/logs：将主机当前目录下的logs目录挂载到容器的/logs

-v $PWD/data:/mysql_data：将主机当前目录下的data目录挂载到容器的/mysql_data

-e MYSQL_ROOT_PASSWORD=123456：初始化root用户的密码

docker stop mymysql

docker start mymysql

docker rm mymysql

docker images

docker ps

7、创建mysql-rc.yaml文件放入home下

8、
kubectl create -f mysql-rc.yaml

kubectl delete -f mysql-rc.yaml

kubectl get rc
kubectl get pods

kubectl run mymysql1 --image=mysql:5.6 --replicas=1 --port=3306

kubectl get deployments
kubectl delete deployment mymysql1

kubectl apply -f nginx-deployment.yaml
